function MoreLoader() {
	var e = this;
	this.init = function(e, t, a, n) {
		this.moreContainerClass = e, this.api = t, this.tpl = a, this.container = n
	}, this.hideMore = function() {
		$(e.moreContainerClass + ">.moreloader-more").hide()
	}, this.showMore = function() {
		$(e.moreContainerClass + ">.moreloader-more").show()
	}, this.showLoading = function() {
		$(e.moreContainerClass + ">.moreloader-more>.moreloader-more-btn").html("加载更多"), $(e.moreContainerClass + ">.moreloader-loading").show()
	}, this.hideLoading = function() {
		$(e.moreContainerClass + ">.moreloader-loading").hide()
	}, this.scrollBody = function(e) {
		$("html,body").animate({
			scrollTop: $(".xunhuan:last").next().offset().top - e
		}, 1e3)
	}, this.load = function(t, a, n) {
		e.hideMore(), e.showLoading(), $.get(e.api, t, function(i) {
			if (i.status) {
				t.hasOwnProperty("clear") && t.clear && $(e.container).html(""), e.showMore(), e.hideLoading();
				var r = i.content;
				r.length < 1 && $(e.moreContainerClass + ">.moreloader-more>.moreloader-more-btn").html("已经没有更多数据了");
				var s = $(e.tpl).html();
				Mustache.parse(s);
				var o = Mustache.render(s, {
					list: r
				});
				$(e.container).children().addClass("xunhuan"), $(e.container).append(o), window.renderCallBack && window.renderCallBack(r), a && (a(i), t.hasOwnProperty("scroll") && t.scroll && e.scrollBody(t.scrollTo))
			} else alert("服务器错误！"), e.showMore(), e.hideLoading(), n && n()
		}, "json")
	}
}

function formatter(e, t) {
	return e.toFixed(t.decimals)
}

function count(e) {
	var t = $(this);
	e = $.extend({}, e || {}, t.data("countToOptions") || {}), t.countTo(e)
}

function appDownload(e, t, a) {
	$(e).on("mouseenter", function(e) {
		e.preventDefault(), $(this).children(t).show(), $(this).siblings().children(t).hide(), $(this).removeClass(a), $(this).siblings().addClass(a)
	})
}

function baiduPush() {
	var e = document.createElement("script");
	e.src = "//push.zhanzhang.baidu.com/push.js";
	var t = document.getElementsByTagName("script")[0];
	t.parentNode.insertBefore(e, t)
}

function baiduCount() {
	var e = document.createElement("script");
	e.src = "js/hm.js";
	var t = document.getElementsByTagName("script")[0];
	t.parentNode.insertBefore(e, t)
}

function doSearch(e) {
	var t = $.trim($("#" + e).val()),
		a = $(".search-tip-link.current").attr("id");
	t.length > 0 && ("search-post-title" === a ? window.location.href = "/s/" + t : "search-post-content" === a && (window.location.href = "/s/" + t + "?searchcontent=true"))
}

function RongHelper() {
	this.unreadNum = 0, this.isInited = !1, this.isConnected = !1, this.connectStatus = -1, this.listeners = new Array, this.conversations = null
}

function numberMessage() {
	$.get("/home/isUnreadSysMessage", {}, function(e) {
		if (e.status && e.content > 0) {
			showSysMsgUnreadCircle();
			var t = e.content,
				a = $("#totality1").text() - 0 + t;
			$("#totality1,#totality2").text(a)
		}
	}, "json")
}

function showSysMsgUnreadCircle() {
	$("#face").addClass("unread"), $(".right-column #tongzhi").addClass("unread"), $(".left-menu-msg").addClass("unread"), $(".addmssg").addClass("unread")
}

function hideSysMsgUnreadCircle() {
	$(".nav #face").removeClass("unread"), $(".right-column #tongzhi").removeClass("unread"), $(".left-menu-msg").removeClass("unread"), $(".addmssg").removeClass("unread")
}

function showChatMsgUnreadCircle() {
	$(".nav #face").addClass("unread"), $(".right-column #liaotian").addClass("unread"), $(".left-menu-msg").addClass("unread"), $(".addmssg").addClass("unread")
}

function hideChatMsgUnreadCircle() {
	$(".nav #face").removeClass("unread"), $(".right-column #liaotian").removeClass("unread"), $(".left-menu-msg").removeClass("unread"), $(".addmssg").removeClass("unread")
}
